
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Correction of lab 6 &#8212; Basics of Image Processing</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jbvinc.css" />
    <link rel="stylesheet" type="text/css" href="../_static/.ipynb_checkpoints/jbvinc-checkpoint.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Installing and using Python" href="../appendices/python.html" />
    <link rel="prev" title="Lab 6" href="lab6.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      <h1 class="site-logo" id="site-title">Basics of Image Processing</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Foreword
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Digital images
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/definition.html">
   What is a digital image?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/display.html">
   Displaying an image
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/operations.html">
   Arithmetic operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/histogram.html">
   Histogram
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/transformations.html">
   Histogram transformations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Filtering
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/convolution.html">
   Convolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/fourier.html">
   Fourier transform
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/filtering.html">
   Filtering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Compression
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/lossless.html">
   Lossless compression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/lossy.html">
   Lossy compression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Mathematical morphology
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/basics.html">
   Basic operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/composition.html">
   Composition of basic operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/measure.html">
   Measure
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Segmentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/histogram.html">
   Histogram thresholding
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/clustering.html">
   Clustering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/region-growing.html">
   Region growing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/watershed.html">
   Watershed
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/evaluation.html">
   How to evaluate a segmentation?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Restoration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/denoising.html">
   Denoising
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/deconvolution.html">
   Deconvolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Feature detection
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/matched-filter.html">
   Matched filter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/edges.html">
   Edge detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/corners.html">
   Corner detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/lines.html">
   Line detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab1.html">
   Lab 1
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc1.html">
     Correction of lab 1
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab2.html">
   Lab 2
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc2.html">
     Correction of lab 2
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab3.html">
   Lab 3
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc3.html">
     Correction of lab 3
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab4.html">
   Lab 4
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc4.html">
     Correction of lab 4
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab5.html">
   Lab 5
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc5.html">
     Correction of lab 5
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="lab6.html">
   Lab 6
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Correction of lab 6
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://moodle.unistra.fr/course/view.php?id=7653">
   Moodle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/python.html">
   Installing and using Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/refs.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/license.html">
   License
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/labs/correc6.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#sobel-and-canny-detectors">
   Sobel and Canny detectors
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sobel-detector">
     Sobel detector
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#canny-detector">
     Canny detector
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#comparison-of-the-two-methods-in-terms-of-computation-time">
     Comparison of the two methods in terms of computation time
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#harris-detector">
   Harris detector
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#hough-transform">
   Hough transform
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="correction-of-lab-6">
<span id="correc6"></span><h1>Correction of lab 6<a class="headerlink" href="#correction-of-lab-6" title="Permalink to this headline">¶</a></h1>
<div class="section" id="sobel-and-canny-detectors">
<h2>Sobel and Canny detectors<a class="headerlink" href="#sobel-and-canny-detectors" title="Permalink to this headline">¶</a></h2>
<p>The objectives of this exercise are to:</p>
<ul class="simple">
<li><p>detect edges using Sobel and Canny detectors</p></li>
<li><p>understand the influence of the parameters of these methods</p></li>
<li><p>compare these methods in terms of computation time</p></li>
</ul>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_4_0.png" src="../_images/correc6_4_0.png" />
</div>
</div>
<div class="section" id="sobel-detector">
<h3>Sobel detector<a class="headerlink" href="#sobel-detector" title="Permalink to this headline">¶</a></h3>
<p>The Sobel detector performs a convolution of the image by two filters,
each allowing to obtain the gradient of the image in the two dimensions.
These two gradients can be merged to result in the right image (how are they merged?).</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_7_0.png" src="../_images/correc6_7_0.png" />
</div>
</div>
<p>The gradient image can be thresholded to identify major contours.
The results for three threshold values are given below.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_9_0.png" src="../_images/correc6_9_0.png" />
</div>
</div>
<ul class="simple">
<li><p>We note that the higher the threshold, the fewer contours detected (there are fewer white pixels).
This is because fewer pixels have a gradient greater than the threshold,
and therefore will be considered as edges.</p></li>
<li><p>If the threshold is too low, then edges are detected almost everywhere.
In particular, the background of the image being (slightly) noisy, edges can be detected there.</p></li>
<li><p>On the contrary, if the threshold is too high, then there are a lot of non-detections
even though there are hardly any false alarms left.</p></li>
<li><p>In addition, even by setting the threshold high enough, some edges are still wide:
they have a width of several pixels, which implies that the edge, although detected, is not positioned with precision.</p></li>
</ul>
</div>
<div class="section" id="canny-detector">
<h3>Canny detector<a class="headerlink" href="#canny-detector" title="Permalink to this headline">¶</a></h3>
<p>Canny detector is more complex than a simple filtering.
It includes in particular a thresholding by hysteresis, <em>i.e.</em> a decision based on two thresholds <span class="math notranslate nohighlight">\(T_{low}\)</span> and <span class="math notranslate nohighlight">\(T_{high}\)</span>:</p>
<ul class="simple">
<li><p>the pixels of intensity lower than <span class="math notranslate nohighlight">\(T_{low}\)</span> will not be considered as edges,</p></li>
<li><p>pixels with an intensity greater than <span class="math notranslate nohighlight">\(T_{high}\)</span> will be considered as edges,</p></li>
<li><p>pixels with an intensity between <span class="math notranslate nohighlight">\(T_{low}\)</span> and <span class="math notranslate nohighlight">\(T_{high}\)</span> will be detected as edges
if and only if they are neighbors of pixels whic are edges.</p></li>
</ul>
<p><strong>Influence of the Gaussian standard deviation (<code class="docutils literal notranslate"><span class="pre">sigma</span></code>)</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_14_0.png" src="../_images/correc6_14_0.png" />
</div>
</div>
<p>We observe that if <code class="docutils literal notranslate"><span class="pre">sigma</span></code> increases, then the number of edges detected is lower.
This can be explained by the fact that the first step of the Canny detector is a filtering of the image by a Gaussian
(with standard deviation <code class="docutils literal notranslate"><span class="pre">sigma</span></code>) to reduce the noise.
In consequence, the image is more blurry and therefore the edges are less marked: they are therefore more difficult to detect.</p>
<p><strong>Influence of <span class="math notranslate nohighlight">\(T_{low}\)</span> (<code class="docutils literal notranslate"><span class="pre">low_threshold</span></code>)</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_17_0.png" src="../_images/correc6_17_0.png" />
</div>
</div>
<p>When the lower threshold increases, the number of detected edges decreases,
since there are fewer pixels whose gradient value is greater than the lower threshold.</p>
<p><strong>Influence of <span class="math notranslate nohighlight">\(T_{high}\)</span> (<code class="docutils literal notranslate"><span class="pre">high_threshold</span></code>)</strong></p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_20_0.png" src="../_images/correc6_20_0.png" />
</div>
</div>
<p>As before, the more the higher threshold increases, the fewer edges are detected.</p>
<p>In conclusion, we observe that the number of detected edges decreases with the value of the thresholds, as for the Sobel detector.
Besides, the Canny detector produces fine and mostly continuous contours: detection is therefore clearer and more precise.</p>
</div>
<div class="section" id="comparison-of-the-two-methods-in-terms-of-computation-time">
<h3>Comparison of the two methods in terms of computation time<a class="headerlink" href="#comparison-of-the-two-methods-in-terms-of-computation-time" title="Permalink to this headline">¶</a></h3>
<p>One of the steps of the Canny detector is to apply a Sobel filter.
So the Canny detector is expected to be slower than the Sobel detector.
We measure the time required for each method to detect the edges of the image.</p>
<p>For practical reasons, depending especially on the computer used for the test,
the results are not perfectly reproducible:
if you run the comparison twice, the computation times will differ slightly.
Therefore, it is advised to measure the computation times over many simulations (100 below).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="o">=</span> <span class="mi">100</span>           <span class="c1"># Number of simulations</span>
<span class="n">total_sobel</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1"># Total time for the I simulations for the Sobel detector</span>
<span class="n">total_canny</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1"># Total time for the I simulations for the Canny detector</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">):</span>
    
    <span class="c1"># Computation time for the Sobel detector</span>
    <span class="n">tic</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">sobel</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mf">0.5</span><span class="o">*</span><span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="c1"># Don&#39;t forget to take thresholding into account!</span>
    <span class="n">tac</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">time_sobel</span> <span class="o">=</span> <span class="n">tac</span><span class="o">-</span><span class="n">tic</span>
    <span class="n">total_sobel</span> <span class="o">+=</span> <span class="n">time_sobel</span>
    
    <span class="c1"># Computation time for the Canny detector</span>
    <span class="n">tic</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">canny</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">tac</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">time_canny</span> <span class="o">=</span> <span class="n">tac</span><span class="o">-</span><span class="n">tic</span>
    <span class="n">total_canny</span> <span class="o">+=</span> <span class="n">time_canny</span>
    
    <span class="c1"># Display the computation time of the two methods (for the first 10 simulations only)</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Sobel : </span><span class="si">{</span><span class="n">time_sobel</span><span class="o">*</span><span class="mf">1e3</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> ms     Canny : </span><span class="si">{</span><span class="n">time_canny</span><span class="o">*</span><span class="mf">1e3</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> ms&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">i</span><span class="o">==</span><span class="mi">10</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;etc.&quot;</span><span class="p">)</span>
    
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Canny detector is, about </span><span class="si">{</span><span class="n">total_canny</span><span class="o">/</span><span class="n">total_sobel</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> times slower than Sobel detector.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Sobel : 3.114 ms     Canny : 15.084 ms
Sobel : 3.432 ms     Canny : 18.522 ms
Sobel : 4.365 ms     Canny : 19.640 ms
Sobel : 2.470 ms     Canny : 14.086 ms
Sobel : 2.302 ms     Canny : 13.968 ms
Sobel : 2.315 ms     Canny : 14.618 ms
Sobel : 2.404 ms     Canny : 14.072 ms
Sobel : 2.308 ms     Canny : 14.012 ms
Sobel : 2.286 ms     Canny : 13.956 ms
Sobel : 2.285 ms     Canny : 14.046 ms
etc.

Canny detector is, about 6 times slower than Sobel detector.
</pre></div>
</div>
</div>
</div>
<p>We were right: Canny detector is slower than Sobel detector.
However, the computation time remains very acceptable for images of classic size (around 15 ms),
so the time difference between the two methods is not detrimental in the majority of applications.</p>
</div>
</div>
<div class="section" id="harris-detector">
<h2>Harris detector<a class="headerlink" href="#harris-detector" title="Permalink to this headline">¶</a></h2>
<p>The objective of this exercise is to detect corners using the Harris detector.</p>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
</div>
<p>The Harris detector can detect corners of an image, based on differences in intensity.</p>
<p>With the function <code class="docutils literal notranslate"><span class="pre">corner_harris</span></code>, choose <code class="docutils literal notranslate"><span class="pre">method</span> <span class="pre">=</span> <span class="pre">'k'</span></code> and a value of <span class="math notranslate nohighlight">\(k\)</span> between 0 and 0.2.
This results in a new image, of the same size as the original image,
whose intensities are proportional to the presence of a corner.</p>
<p>In the images below, the intensities are restricted to the interval <span class="math notranslate nohighlight">\([-0.4, 0.4]\)</span> in order to highlight the values of the image.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_32_0.png" src="../_images/correc6_32_0.png" />
</div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">corner_peaks</span></code> returns the coordinates of the strong values of the image, which correspond to the corners.
These coordinates are returned in the form of a matrix, the first column corresponds to the ordinates, the second to the abscissas.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_34_0.png" src="../_images/correc6_34_0.png" />
</div>
</div>
<p>The images above correspond to the result obtained for two values of <span class="math notranslate nohighlight">\(k\)</span> (and <code class="docutils literal notranslate"><span class="pre">threshold_rel</span> <span class="pre">=</span> <span class="pre">0.01</span></code>).
When <span class="math notranslate nohighlight">\(k\)</span> is large, only the sharpest corners are detected: one can see this in the image on the right.</p>
<p>However, not all corners of are detected: how to improve the result?</p>
<p>In addition, some points do not correspond to corners.
They correspond actually to pixels with very different intensity from their neighbors,
which is the definition of a corner for Harris.</p>
</div>
<div class="section" id="hough-transform">
<h2>Hough transform<a class="headerlink" href="#hough-transform" title="Permalink to this headline">¶</a></h2>
<p>The objectives of this exercise are:</p>
<ul class="simple">
<li><p>to detect lines in an image with the Hough transform</p></li>
<li><p>to know how to interpret a Hough transform</p></li>
</ul>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
</div>
<p>The Hough transform is applied to binary images, which must highlight the lines of the image.
Also, an edge detection is needed.
We apply the Canny detector (with the default parameters).</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_41_0.png" src="../_images/correc6_41_0.png" />
</div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">hough_line</span></code> returns the accumulator and the corresponding x-axis and y-axis.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_43_0.png" src="../_images/correc6_43_0.png" />
</div>
</div>
<p>We can see clearly the sinusoids, each corresponding to a white pixel of the image of the contours
(actually, we have done an image transformation to bring out the sinusoids).
When the sinusoids intersect, they increase the intensity of the intersection pixel.
The brightest pixels of the transform correspond to the main lines of the edges.
The function <code class="docutils literal notranslate"><span class="pre">hough_line_peak</span></code> brings these pixels:
the most important are represented by the green circles on the accumulator,
and correspond to the lines shown in the image below.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc6_45_0.png" src="../_images/correc6_45_0.png" />
</div>
</div>
<p>Can you identify where the non-detected lines of the image are on the accumulator?</p>
<p>Try to detect the central circle of the object.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./labs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="lab6.html" title="previous page">Lab 6</a>
    <a class='right-next' id="next-link" href="../appendices/python.html" title="next page">Installing and using Python</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Vincent Mazet (University of Strasbourg, France)<br/>
        
            &copy; Copyright 2021-2022.<br/>
          <div class="extra_footer">
            Basics of Image Processing &mdash; Vincent Mazet (Université de Strasbourg), 2021 &mdash; <a href='license.html'>CC BY-NC 4.0</a>.
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>