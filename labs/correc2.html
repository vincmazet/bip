
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Correction of lab 2 &#8212; Basics of Image Processing</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jbvinc.css" />
    <link rel="stylesheet" type="text/css" href="../_static/.ipynb_checkpoints/jbvinc-checkpoint.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lab 3" href="lab3.html" />
    <link rel="prev" title="Lab 2" href="lab2.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      <h1 class="site-logo" id="site-title">Basics of Image Processing</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../index.html">
   Foreword
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Digital images
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/definition.html">
   What is a digital image?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/display.html">
   Displaying an image
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/operations.html">
   Arithmetic operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/histogram.html">
   Histogram
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/transformations.html">
   Histogram transformations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Filtering
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/convolution.html">
   Convolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/fourier.html">
   Fourier transform
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/filtering.html">
   Filtering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../filtering/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Compression
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/lossless.html">
   Lossless compression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/lossy.html">
   Lossy compression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Mathematical morphology
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/basics.html">
   Basic operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/composition.html">
   Composition of basic operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/measure.html">
   Measure
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Interpolation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../interpolation/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../interpolation/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Registration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../registration/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../registration/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Segmentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/intensity.html">
   Intensity-based segmentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/region.html">
   Region-based segmentation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/watershed.html">
   Watershed
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/evaluation.html">
   How to evaluate a segmentation?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Restoration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/denoising.html">
   Denoising
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/deconvolution.html">
   Deconvolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Feature detection
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/matched-filter.html">
   Matched filter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/pattern.html">
   Pattern detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/edges.html">
   Edge detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/corners.html">
   Corner detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/lines.html">
   Line detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab1.html">
   Lab 1
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc1.html">
     Correction of lab 1
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="lab2.html">
   Lab 2
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Correction of lab 2
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab3.html">
   Lab 3
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc3.html">
     Correction of lab 3
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab4.html">
   Lab 4
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc4.html">
     Correction of lab 4
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab5.html">
   Lab 5
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc5.html">
     Correction of lab 5
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="lab6.html">
   Lab 6
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="correc6.html">
     Correction of lab 6
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  In a nutshell
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../nutshell/optimization.html">
   Mathematical optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../nutshell/classification.html">
   Classification
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://moodle.unistra.fr/course/view.php?id=7653">
   Moodle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/python.html">
   Installing and using Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/refs.html">
   References
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/license.html">
   License
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/labs/correc2.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#convolution">
   Convolution
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#objectives">
     Objectives
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Convolution
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#properties-of-the-fourier-transform">
   Properties of the Fourier transform
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Objectives
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#some-remarks">
     Some remarks
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#results">
     Results
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#filtering-aliasing">
   Filtering aliasing
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Objectives
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#downsampling-and-filtering">
     Downsampling and filtering
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lossy-compression">
   Lossy compression
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     Objectives
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#images-of-the-dct-basis">
     Images of the DCT basis
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#application-of-the-jpeg-principle">
     Application of the JPEG principle
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mse-evolution">
     MSE evolution
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compression-on-88-sub-images">
     Compression on 8×8 sub-images
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="correction-of-lab-2">
<span id="correc2"></span><h1>Correction of lab 2<a class="headerlink" href="#correction-of-lab-2" title="Permalink to this headline">¶</a></h1>
<div class="section" id="convolution">
<h2>Convolution<a class="headerlink" href="#convolution" title="Permalink to this headline">¶</a></h2>
<div class="section" id="objectives">
<h3>Objectives<a class="headerlink" href="#objectives" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>know how to use the function <code class="docutils literal notranslate"><span class="pre">scipy.ndimage.convolve</span></code> to apply the convolution product</p></li>
<li><p>be able to identify the kernel applied on a convolved image</p></li>
</ul>
</div>
<div class="section" id="id1">
<h3>Convolution<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Before convolving the image by the different filters, it is interesting to display the filters themselves.
In case there is no explicit matrix to represent a filter, as with the Gaussian filter <code class="docutils literal notranslate"><span class="pre">skimage.filters.gaussian</span></code>,
we can simply convolve the filter by an image containing only one non-zero pixel.
Indeed, this image is equivalent to a Dirac pulse <span class="math notranslate nohighlight">\(\delta\)</span> which is the neutral element of the convolution product.</p>
<p>The two last kernels are defined with:</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">h</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
</pre></div>
</div>
</div>
</div>
<p>(note the double brackets, so as to get a 2D array) and</p>
<div class="cell tag_remove-output docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">N</span> <span class="o">=</span> <span class="mi">30</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="p">))</span> <span class="o">/</span> <span class="n">N</span>
</pre></div>
</div>
</div>
</div>
<p>The results of the convolutions are shown below, for both the “Dirac pulse” and the smiley.</p>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_13_0.png" src="../_images/correc2_13_0.png" />
<img alt="../_images/correc2_13_1.png" src="../_images/correc2_13_1.png" />
</div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">skimage.filters.gaussian</span></code> defines a Gaussian kernel (this is the second image above).
The result of the function is the convolution product of this Gaussian kernel with the image given as a parameter of the function.</p>
<p>The “gradient” image brings out the vertical contours of the image.
We will reuse such a filter in <a class="reference internal" href="../detection/edges.html#edge-detection"><span class="std std-ref">Edge detection</span></a>.</p>
</div>
</div>
<div class="section" id="properties-of-the-fourier-transform">
<h2>Properties of the Fourier transform<a class="headerlink" href="#properties-of-the-fourier-transform" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>Objectives<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>manipulation of <code class="docutils literal notranslate"><span class="pre">fft2</span></code> et <code class="docutils literal notranslate"><span class="pre">fftshift</span></code></p></li>
<li><p>display adequately the magnitude of the Fourier transform to see the details</p></li>
<li><p>observe the effect of a contraction-dilation</p></li>
<li><p>observe the effect of a rotation</p></li>
<li><p>observe the effect of a translation</p></li>
</ul>
</div>
<div class="section" id="some-remarks">
<h3>Some remarks<a class="headerlink" href="#some-remarks" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>After computing the Fourier transform with <code class="docutils literal notranslate"><span class="pre">numpy.fft.fft2</span></code>,
use the function <code class="docutils literal notranslate"><span class="pre">numpy.fft.fftshift</span></code> to shift the zero frequencies at the centre of the image.</p></li>
<li><p>The Fourier transform being complex, its display is not straightforward:
so one need to show its magnitude (<code class="docutils literal notranslate"><span class="pre">numpy.absolute</span></code>) and argument (<code class="docutils literal notranslate"><span class="pre">numpy.angle</span></code>).</p></li>
</ul>
</div>
<div class="section" id="results">
<h3>Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h3>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_19_0.png" src="../_images/correc2_19_0.png" />
<img alt="../_images/correc2_19_1.png" src="../_images/correc2_19_1.png" />
<img alt="../_images/correc2_19_2.png" src="../_images/correc2_19_2.png" />
<img alt="../_images/correc2_19_3.png" src="../_images/correc2_19_3.png" />
<img alt="../_images/correc2_19_4.png" src="../_images/correc2_19_4.png" />
</div>
</div>
<p>This exercise highlights some properties of the Fourier transform.</p>
<ul class="simple">
<li><p>The images <code class="docutils literal notranslate"><span class="pre">s1</span></code> and <code class="docutils literal notranslate"><span class="pre">s2</span></code> show that a “contraction” in the spatial domain
(the bands from <code class="docutils literal notranslate"><span class="pre">s1</span></code> to <code class="docutils literal notranslate"><span class="pre">s2</span></code> get closer and narrower) results in “dilation” in the frequency domain
(the points diverge, even if the pattern remains overall the same, whether on the magnitude and the argument).</p></li>
<li><p>A rotation in the spatial domain results in an identical rotation in the frequency domain
(<code class="docutils literal notranslate"><span class="pre">s3</span></code> is a rotation of 90 ° of <code class="docutils literal notranslate"><span class="pre">s2</span></code>).</p></li>
<li><p>A spatial shift implies a modification on the argument (but not on the magnitude), hence the name of <em>phase shift</em>
(the white square of the images <code class="docutils literal notranslate"><span class="pre">s4</span></code> and <code class="docutils literal notranslate"><span class="pre">s5</span></code> has been translated).</p></li>
</ul>
</div>
</div>
<div class="section" id="filtering-aliasing">
<h2>Filtering aliasing<a class="headerlink" href="#filtering-aliasing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Objectives<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Define and apply a filter for a real application</p></li>
<li><p>Discover aliasing in images</p></li>
</ul>
<p><strong>Warning</strong>: because Jupyter Lab and Matplotlib show images with a rescaling, the function <code class="docutils literal notranslate"><span class="pre">imshow</span></code> can introduce aliasing,
even if there is no aliasing in the actual image.
Therefore, do not use <code class="docutils literal notranslate"><span class="pre">imshow</span></code> in this exercice, but save the image (with <code class="docutils literal notranslate"><span class="pre">skimage.io.imsave</span></code>) and display it by using an external viewer.</p>
</div>
<div class="section" id="downsampling-and-filtering">
<h3>Downsampling and filtering<a class="headerlink" href="#downsampling-and-filtering" title="Permalink to this headline">¶</a></h3>
<p>Three images are generated:</p>
<ul class="simple">
<li><p>the original one, rescaled by a factor <span class="math notranslate nohighlight">\(S\)</span>,</p></li>
<li><p>the original one, filtered by a Gaussian filter, then rescaled by a factor <span class="math notranslate nohighlight">\(S\)</span>,</p></li>
<li><p>the original one, filtered by an ideal low-pass filter (defined in the Fourier domain), then rescaled by a factor <span class="math notranslate nohighlight">\(S\)</span>.</p></li>
</ul>
<p>Note that when using the inverse Fourier transform, you may have to get the real part of the result, if it is complex.</p>
<p>The mask is of the same size that the Fourier transform <code class="docutils literal notranslate"><span class="pre">X</span></code> of the original image.
The low frequencies must be 1 and the high frequency 0, as in the image below (the pixels 1 are in the center to manage the use of <code class="docutils literal notranslate"><span class="pre">fftshift</span></code>):</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_32_0.png" src="../_images/correc2_32_0.png" />
</div>
</div>
<p>You should obtain the following results.
The aliasing is clearly visible on the first image, where no filter has been applied:
a weird effect is visible on the tiles.
The Gaussian filter strongly attenuates the effect, and the ideal filter is better.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_34_0.png" src="../_images/correc2_34_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="lossy-compression">
<h2>Lossy compression<a class="headerlink" href="#lossy-compression" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3>Objectives<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>know how to implement the basic principle of JPEG compression</p></li>
<li><p>use the discrete cosine transform</p></li>
<li><p>analyze the effect of compression on visual quality and PSNR</p></li>
</ul>
</div>
<div class="section" id="images-of-the-dct-basis">
<h3>Images of the DCT basis<a class="headerlink" href="#images-of-the-dct-basis" title="Permalink to this headline">¶</a></h3>
<p>First of all, it is interesting to view the elements of the DCT basis.</p>
<p>Since the images of the base correspond to a single non-zero coefficient in the domain of the transform,
a solution to display these images is to create images that are zero in the domain of the transform, except in a single pixel.
By using the function <code class="docutils literal notranslate"><span class="pre">scipy.fftpack.idctn</span></code>, we can get the corresponding 2D cosine.
The low frequencies are at the top left.</p>
<p>Here are some examples of images of the base (on the first line) and their DCT (on the second line) for a size of 8 × 8 pixels.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_42_0.png" src="../_images/correc2_42_0.png" />
</div>
</div>
<p>It can be seen that the pixels at the top left of the DCT (therefore close to the origin) correspond to a low-frequency
since the corresponding image is a 2D cosine of low frequency in the spatial domain.
Conversely, the pixel at the bottom right is the very high frequency component:
the intensity of the pixels changes very quickly in the image.</p>
</div>
<div class="section" id="application-of-the-jpeg-principle">
<h3>Application of the JPEG principle<a class="headerlink" href="#application-of-the-jpeg-principle" title="Permalink to this headline">¶</a></h3>
<p>Unlike the Fourier transform which decomposes an image as complex exponentials, the DCT decomposes an image as real cosines.
Therefore the result is not complex; there is no need to display modulus and phase.
Yet, the zero frequency coefficient being much greater than the others,
the contrast of the DCT must be modified (how?) to visualize it.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_46_0.png" src="../_images/correc2_46_0.png" />
</div>
</div>
<p>We can notice (even if it is not obvious) that the low-frequency coefficients are more energetic than the others.
This means that the image is mostly made up of low frequencies.</p>
<p>To perform the compression, we choose to cancel the high-frequency pixels using a square mask of side <span class="math notranslate nohighlight">\(C\)</span>.
The size of the square divided by the image size corresponds to the compression rate.</p>
<div class="cell tag_remove-input docutils container">
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_50_0.png" src="../_images/correc2_50_0.png" />
</div>
</div>
<p>Note that even with a very high compression rate, the visual result is very good:
it is very difficult to observe the differences between the two images.
This observation is also confirmed by the low value of the MSE:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_52_0.png" src="../_images/correc2_52_0.png" />
</div>
</div>
<p>The difference image is interesting because we can see that the errors are mainly located in the areas of high frequencies
(contours, tail…).
This makes sense since it is precisely these high frequencies that have been cancelled.</p>
<p>JPEG compression plays on the fact that the human eye is not sensitive to these high-frequency changes.</p>
</div>
<div class="section" id="mse-evolution">
<h3>MSE evolution<a class="headerlink" href="#mse-evolution" title="Permalink to this headline">¶</a></h3>
<p>The previous procedure is now used with different size of the mask,
in order to calculate the MSE between the compressed image and the original image.
The PSNR is also indicated, it is a measure that we will see in a future course.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_56_0.png" src="../_images/correc2_56_0.png" />
</div>
</div>
<p>The analysis of the curves leads to the following conclusions.</p>
<ul class="simple">
<li><p>The larger the PSNR, the better the picture quality:
so it makes sense that it increases as the compression ratio increases.</p></li>
<li><p>Conversely, MSE measures the difference between the compressed image and the original image:
as the compression ratio increases, the difference becomes smaller and smaller.</p></li>
<li><p>For very large compression ratios, a small variation in the ratio implies a rapid variation in PSNR:
it drops rapidly. However, their values remain above 80 dB,
which still corresponds to very good quality.</p></li>
</ul>
<p>In classic JPEG compression, the DCT is not directly calculated on the whole image, but on 8 × 8 size thumbnails, as is done below.</p>
</div>
<div class="section" id="compression-on-88-sub-images">
<h3>Compression on 8×8 sub-images<a class="headerlink" href="#compression-on-88-sub-images" title="Permalink to this headline">¶</a></h3>
<p>The image is divided into blocks of 8×8 pixels, then the DCT is computed on each block,
and finally, the high frequencies of each DCT are cancelled.
To highlight the blocking effect that can appear when the compression is too strong,
the size of the mask is small compared to the size of the sub-images.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<img alt="../_images/correc2_60_0.png" src="../_images/correc2_60_0.png" />
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./labs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="lab2.html" title="previous page">Lab 2</a>
    <a class='right-next' id="next-link" href="lab3.html" title="next page">Lab 3</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Vincent Mazet (University of Strasbourg, France)<br/>
        
            &copy; Copyright 2021-2022.<br/>
          <div class="extra_footer">
            Basics of Image Processing &mdash; Vincent Mazet (Université de Strasbourg), 2021 &mdash; <a href='license.html'>CC BY-NC 4.0</a>.
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>