
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Convolution &#8212; Basics of Image Processing</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=62ba249389abaaa9ffc34bf36a076bdc1d65ee18" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jbvinc.css" />
    <link rel="stylesheet" type="text/css" href="../_static/.ipynb_checkpoints/jbvinc-checkpoint.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=f31d14ad54b65d19161ba51d4ffff3a77ae00456"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Fourier transform" href="fourier.html" />
    <link rel="prev" title="Introduction" href="intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Basics of Image Processing</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Foreword
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Digital images
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/definition.html">
   What is a digital image?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/eye.html">
   Human vision
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/acquisition.html">
   Image acquisition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/displaying.html">
   Displaying an image
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/operations.html">
   Arithmetic operations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../digital-images/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Histogram
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../histogram/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../histogram/histogram.html">
   Histogram
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../histogram/transformations.html">
   Histogram transformations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../histogram/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Filtering
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Convolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="fourier.html">
   Fourier transform
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="wavelets.html">
   Wavelets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="filtering.html">
   Filtering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Compression
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/lossless.html">
   Lossless compression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/lossy.html">
   Lossy compression
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../compression/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Registration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../registration/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../registration/registration.html">
   Registration
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../registration/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Interpolation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../interpolation/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../interpolation/interpolation.html">
   Interpolation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../interpolation/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Textures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../textures/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../textures/textures.html">
   Textures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../textures/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Segmentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/histogram.html">
   Histogram thresholding
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/clustering.html">
   Clustering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/region-growing.html">
   Region growing
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/watershed.html">
   Watershed
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/evaluation.html">
   How to evaluate a segmentation?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../segmentation/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Mathematical morphology
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/basics.html">
   Basic operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/composition.html">
   Composition of basic operators
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/measure.html">
   Measure
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mm/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Restoration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/denoising.html">
   Denoising
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/deconvolution.html">
   Deconvolution
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../restoration/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Feature detection
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/matched-filter.html">
   Matched filter
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/edges.html">
   Edge detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/corners.html">
   Corner detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/lines.html">
   Line detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../detection/outro.html">
   Conclusion
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../labs/lab1.html">
   Lab 1
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor11.html">
     1 Getting started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor12.html">
     2 Display a saved image
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor13.html">
     3 Display several images
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor14.html">
     4 Create a simple image
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor15.html">
     5 Setting the intensity range
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor16.html">
     6 Segmentation by histogram thresholding
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor17.html">
     7 Contrast enhancement
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../labs/lab2.html">
   Lab 2
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor21.html">
     Convolution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor22.html">
     Properties of the Fourier transform
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor23.html">
     Filtering aliasing
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../labs/lab3.html">
   Lab 3
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor3.html">
     Lossy compression
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../labs/lab4.html">
   Lab 4
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor4.html">
     Segmentation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../labs/lab5.html">
   Lab 5
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor5.html">
     Mathematical morphology
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../labs/lab6.html">
   Lab 6
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
  <label for="toctree-checkbox-6">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor6.html">
     Denoising + Deconvolution
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../labs/lab7.html">
   Lab 7
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
  <label for="toctree-checkbox-7">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../labs/cor7.html">
     Sobel and Canny detectors + Harris detector + Hough transform
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  In a nutshell
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../nutshell/optimization.html">
   Mathematical optimization
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../nutshell/classification.html">
   Classification
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../nutshell/deeplearning.html">
   Deep learning
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Appendices
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference external" href="https://moodle.unistra.fr/course/view.php?id=7653">
   Moodle
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/python.html">
   Installing and using Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/glossary.html">
   Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../appendices/license.html">
   License
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/filtering/convolution.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition">
   Definition
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#properties">
   Properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#boundaries-effects">
   Boundaries effects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#separable-convolution">
   Separable Convolution
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Convolution</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#definition">
   Definition
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#properties">
   Properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#boundaries-effects">
   Boundaries effects
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#separable-convolution">
   Separable Convolution
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="convolution">
<span id="filtering-convolution"></span><h1>Convolution<a class="headerlink" href="#convolution" title="Permalink to this headline">#</a></h1>
<!-- **///// -> éléments sur la convolution à ajouter dans la partie convolution (formation des images)** -->
<section id="definition">
<h2>Definition<a class="headerlink" href="#definition" title="Permalink to this headline">#</a></h2>
<p>Many image processing results come from a modification of one pixel with respect to its neighbors.
When this modification is similar in the entire image <span class="math notranslate nohighlight">\(g\)</span>,
it can be mathematically defined using a second image <span class="math notranslate nohighlight">\(h\)</span> which defines the neighbor relationships.
This results in a third image <span class="math notranslate nohighlight">\(f\)</span>.
This is the so-called convolution <a class="reference internal" href="outro.html#b-filtering-jahne2005"><span class="std std-ref">[Jähne 2005, section 4]</span></a> and it is denoted with <span class="math notranslate nohighlight">\(*\)</span>:</p>
<!-- dire également que ça modélise l'effet d'un instrument de mesure -->
<div class="math notranslate nohighlight">
\[
  f(x,y) = (g*h)(x,y) = \sum_m \sum_n g(x-m,y-n) \ h(m,n)
\]</div>
<p>Intuitively, the convolution “spreads” each pixel <span class="math notranslate nohighlight">\((m,n)\)</span> in <span class="math notranslate nohighlight">\(g\)</span> following <span class="math notranslate nohighlight">\(h\)</span> and proportionally to the intensity <span class="math notranslate nohighlight">\(g(m,n)\)</span>.
<a class="reference internal" href="#f-convolution-sketch"><span class="std std-numref">Fig. 26</span></a> gives an example of the computing of a particular pixel.</p>
<figure class="align-default" id="f-convolution-sketch">
<img alt="../_images/convolution.png" src="../_images/convolution.png" />
<figcaption>
<p><span class="caption-number">Fig. 26 </span><span class="caption-text">Example for computing the pixel (2,2) of <span class="math notranslate nohighlight">\(f\)</span>.</span><a class="headerlink" href="#f-convolution-sketch" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>For the sake of simplicity, the image <span class="math notranslate nohighlight">\(h\)</span> is often:</p>
<ul class="simple">
<li><p>of odd size (<span class="math notranslate nohighlight">\(3\times3\)</span>, <span class="math notranslate nohighlight">\(5\times5\)</span>, <span class="math notranslate nohighlight">\(7\times7\)</span>…);</p></li>
<li><p>centered, <em>i.e.</em> the pixel with coordinates <span class="math notranslate nohighlight">\((0,0)\)</span> is at the center of the image <span class="math notranslate nohighlight">\(h\)</span>.</p></li>
</ul>
<p>The image <span class="math notranslate nohighlight">\(h\)</span> is called by different names, depending on the context:
<em>filter</em>, <em>mask</em>, <em>kernel</em>, <em>window</em>, <em>pattern</em> or <em>point spread function</em> (PSF).</p>
<p>Some convolution examples are shown in <a class="reference internal" href="#f-convolution-example"><span class="std std-numref">Fig. 27</span></a>.</p>
<figure class="align-default" id="f-convolution-example">
<img alt="../_images/conv-examples.svg" src="../_images/conv-examples.svg" /><figcaption>
<p><span class="caption-number">Fig. 27 </span><span class="caption-text">Three examples of image convolution.</span><a class="headerlink" href="#f-convolution-example" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<!-- commenter les trois convolutions -->
</section>
<section id="properties">
<h2>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">#</a></h2>
<p>As a mathematical operation, the convolution has several properties.</p>
<ul class="simple">
<li><p>The neutral element of convolution is an image filled with zeros but the pixel at the center equals 1.</p></li>
<li><p>The convolution is commutative:  
<span class="math notranslate nohighlight">\(g*h = h*g\)</span>.</p></li>
<li><p>The convolution is distributive with respect to the addition:  
<span class="math notranslate nohighlight">\(g*(h_1+h_2) = g*h_1 + g*h_2\)</span>.</p></li>
<li><p>The convolution is bilinear:  
<span class="math notranslate nohighlight">\(\alpha (g*h) = (\alpha g) * h = g * (\alpha h)\)</span>   (with <span class="math notranslate nohighlight">\(\alpha\in\mathbb{C}\)</span>).</p></li>
<li><p>The convolution is associative:  
<span class="math notranslate nohighlight">\(h_1*(h_2*h_3) = (h_1*h_2)*h_3\)</span>.</p></li>
</ul>
</section>
<section id="boundaries-effects">
<span id="c-convolution-boundaries"></span><h2>Boundaries effects<a class="headerlink" href="#boundaries-effects" title="Permalink to this headline">#</a></h2>
<p>The convolution formula is not defined on the boundaries of the image:
as an example, computing <span class="math notranslate nohighlight">\(f_{1,1}\)</span> in <a class="reference internal" href="#f-convolution-sketch"><span class="std std-numref">Fig. 26</span></a> requires the value of <span class="math notranslate nohighlight">\(g_{0,0}\)</span> which is not defined.</p>
<p>Therefore, one has to assume some hypotheses of the pixel values outside the image.
<a class="reference internal" href="#f-convolution-boundaries-hypotheses"><span class="std std-numref">Fig. 28</span></a> shows an image with some possibilities to consider the external pixels, and <a class="reference internal" href="#f-convolution-boundaries-results"><span class="std std-numref">Fig. 29</span></a> shows the convolution of these images by a Gaussian.</p>
<figure class="align-default" id="f-convolution-boundaries-hypotheses">
<img alt="../_images/boundaries-hypotheses.svg" src="../_images/boundaries-hypotheses.svg" /><figcaption>
<p><span class="caption-number">Fig. 28 </span><span class="caption-text">Several ways to set the pixels outside the image.</span><a class="headerlink" href="#f-convolution-boundaries-hypotheses" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="f-convolution-boundaries-results">
<img alt="../_images/boundaries-results.svg" src="../_images/boundaries-results.svg" /><figcaption>
<p><span class="caption-number">Fig. 29 </span><span class="caption-text">Results of the convolution with the same image.</span><a class="headerlink" href="#f-convolution-boundaries-results" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>One can see on the <a class="reference internal" href="#f-convolution-boundaries-results"><span class="std std-numref">Fig. 29</span></a> that the three convolutions are basically identical:
only the pixels near the boundaries may be different (darker or brighter on this example).
Anyway, there is no perfect choice to set the pixels outside the image, and each choice yields some errors.
Also, the best way is to make the objects of interest far from the edges.</p>
<p>At last, note that the wrapping hypothesis yields a <em>circular convolution</em>.
This is also the result given by a multiplication in the Fourier domain (see <a class="reference internal" href="fourier.html#filtering-fourier"><span class="std std-ref">Fourier transform</span></a>).</p>
</section>
<section id="separable-convolution">
<h2>Separable Convolution<a class="headerlink" href="#separable-convolution" title="Permalink to this headline">#</a></h2>
<p>A separable convolution is when the convolution kernel <span class="math notranslate nohighlight">\(h\)</span> can be written as the convolution of two 1D filters (say <span class="math notranslate nohighlight">\(h_1\)</span> and <span class="math notranslate nohighlight">\(h_2\)</span>) defined along the two axes.
Let’s give an example:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
  \underbrace{\begin{bmatrix}
    \alpha a &amp; \alpha b &amp; \alpha c \\
    \beta  a &amp; \beta  b &amp; \beta  c \\
    \gamma a &amp; \gamma b &amp; \gamma c \\
  \end{bmatrix}}_{h}
  =
  \underbrace{\begin{bmatrix}
    0 &amp; \alpha &amp; 0 \\
    0 &amp; \beta &amp; 0 \\
    0 &amp; \gamma &amp; 0 \\
  \end{bmatrix}}_{h_1}
  *
  \underbrace{\begin{bmatrix}
    0 &amp; 0 &amp; 0 \\
    a &amp; b &amp; c \\
    0 &amp; 0 &amp; 0 \\
    \end{bmatrix}}_{h_2}
  =
  \underbrace{\begin{bmatrix}
    \alpha \\
    \beta \\
    \gamma \\
  \end{bmatrix}}_{h_1}
  *
  \underbrace{\begin{bmatrix}
    a &amp; b &amp; c \\
    \end{bmatrix}}_{h_2}
\end{split}\]</div>
<p>Thus, the convolution of an image <span class="math notranslate nohighlight">\(g\)</span> by a separable filter <span class="math notranslate nohighlight">\(h\)</span> can be calculated by first computing the convolution of <span class="math notranslate nohighlight">\(g\)</span> with <span class="math notranslate nohighlight">\(h_1\)</span>, then the convolution of the former result with <span class="math notranslate nohighlight">\(h_2\)</span> (or the reverse):</p>
<div class="math notranslate nohighlight">
\[
  g * h = g * (h_1*h_2) = (g*h_1) * h_2 = (g*h_2) * h_1
\]</div>
<p>The convolution separability saves computation time because the computation of two 1D convolutions requires less operations than the computation of a 2D convolution.</p>
<!-- Exemple pour des images $g$ et $h$ de taille $M \times N$~:

   | multiplications | additions

Sans séparabilité :
  $f(x,y) = \sum_m \sum_n g(x-m,y-n) h(m,n)$ | $MN$      | $MN-1$
  Pour tous les pixels $x,y$~:               | $(MN)^2$  | $MN(MN-1)$

  Avec séparabilité :
  $f_1(x,y) = \sum_m g(x-m,y) h_1(m)$        | $M$       | $M-1$
  $f(x,y) = \sum_n f_1(x,y-n) h_2(n)$        | $N$       | $N-1$
  Pour tous les pixels $x,y$~:               | $MN(M+N)$ | $MN(M+N-2)$ -->
<!--   EVOQUER CONVOLUTION ? --></section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./filtering"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Introduction</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="fourier.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Fourier transform</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Vincent Mazet (University of Strasbourg, France)<br/>
  
      &copy; Copyright 2022-2023.<br/>
    <div class="extra_footer">
      Basics of Image Processing &mdash; Vincent Mazet (Université de Strasbourg), 2020-2023 &mdash; <a href='https://vincmazet.github.io/bip/appendices/license.html'>CC BY-NC 4.0</a>.
    </div>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>